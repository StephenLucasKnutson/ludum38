{"version":3,"file":"bundle.js","sourceRoot":"","sources":["../TileType.ts","../PlayerStats.ts","../Player.ts","../WorldBlock.ts","../World.ts","../Simulator.ts","../UI.ts","../UserControls.ts","../Autowired.ts","../Main.ts"],"names":[],"mappings":"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","sourcesContent":["export class TileType {\n    name: string;\n    color: number;\n    goldPerTurn: number;\n    tendencyToEnter: number;\n    tendencyToLeave: number;\n    chanceToSpawn: number;\n    upgradeCost: number;\n    possibleUpgrades: TileType[];\n\n    material: THREE.Material;\n\n    public constructor(name: string,\n                       color: number,\n                       goldPerTurn: number,\n                       tendencyToEnter: number,\n                       tendencyToLeave: number,\n                       chanceToSpawn: number,\n                       upgradeCost: number) {\n        this.name = name;\n        this.color = color;\n        this.goldPerTurn = goldPerTurn;\n        this.tendencyToEnter = tendencyToEnter;\n        this.tendencyToLeave = tendencyToLeave;\n        this.chanceToSpawn = chanceToSpawn;\n        this.upgradeCost = upgradeCost;\n\n        var image = new Image();\n        image.src = 'data:image/jpeg;base64,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';\n\n        var texture = new THREE.Texture(image);\n        image.onload = function() {\n            texture.needsUpdate = true;\n        };\n\n\n        texture.repeat.set(3, 3);\n        texture.wrapS = texture.wrapT = THREE.MirroredRepeatWrapping;\n        this.material = new THREE.MeshBasicMaterial( { map: texture, side: THREE.BackSide } );\n        //this.material = new THREE.MeshBasicMaterial({color: this.color, side: THREE.BackSide});\n    }\n    static destroyed: TileType;\n    static destroyedCheaply: TileType;\n    static plains: TileType;\n    static farm: TileType;\n    static factoryFarm: TileType;\n    static forest: TileType;\n    static mountains: TileType;\n    static sea: TileType;\n    static desert: TileType;\n    static goldMine: TileType;\n    static gold: TileType;\n    static diamondMine: TileType;\n    static diamond: TileType;\n    static megalopolis: TileType;\n    static city: TileType;\n    static town: TileType;\n    static village: TileType;\n    static militaryBase: TileType;\n    static barracks: TileType;\n    static wall: TileType;\n\n    static allTileTypes: TileType[];\n\n    static tileTypeToGold: {[key: string]: number;} = {};\n\n    static initialize() {\n        TileType.destroyed = new TileType(\"DESTROYED\", 0x000000, 0, 0, 1, 0, 1000000);\n        TileType.destroyedCheaply = new TileType(\"DESTROYED\", 0x000000, 0, 0, 1, 0, 1000);\n        TileType.plains = new TileType(\"PLAINS\", 0xC0FF6D, 1, 0.5, 0.2, 0, 100);\n        TileType.farm = new TileType(\"FARM\", 0xC0FF6D, 5, 0.2, 0.0, 0, 1000);\n        TileType.factoryFarm = new TileType(\"FACTORY FARM\", 0xC0FF6D, 50, 0.5, 0.0, 0, 10000);\n        TileType.forest = new TileType(\"FOREST\", 0x228B22, 2, 0.5, 0.21, 0, 1000);\n        TileType.mountains = new TileType(\"MOUNTAINS\", 0x968D99, 3, 0.25, 0.1, 0, 0);\n        TileType.sea = new TileType(\"SEA\", 0x006994, 1, 0.00001, 0.1, 0, 0);\n        TileType.desert = new TileType(\"DESERT\", 0xEDC9AF, 0, 0.01, 0.1, 0, 0);\n        TileType.goldMine = new TileType(\"GOLD MINE\", 0xFFDF00, 100, 0.01, 0.0, 0, 10000);\n        TileType.gold = new TileType(\"GOLD\", 0xFFDF00, 20, 0.01, 0.0, 0, 0);\n        TileType.diamondMine = new TileType(\"DIAMOND MINE\", 0x9AC5DB, 200, 0.01, 0.0, 0, 20000);\n        TileType.diamond = new TileType(\"DIAMOND\", 0x9AC5DB, 40, 0.01, 0.0, 0, 0);\n        TileType.megalopolis = new TileType(\"MEGALOPOLIS\", 0x000000, 100000, 0.1, 0.0, 1.0, 1000000);\n        TileType.city = new TileType(\"CITY\", 0x000000, 1000, 0.1, 0.0, 0.5, 500000);\n        TileType.town = new TileType(\"TOWN\", 0x000000, 100, 0.1, 0.0, 0.1, 100000);\n        TileType.village = new TileType(\"VILLAGE\", 0x000000, 10, 0.1, 0.0, 0.01, 10000);\n        TileType.militaryBase = new TileType(\"MILITARY BASE\", 0x000000, -1000, 0.1, 0.0, 0.75, 100000);\n        TileType.barracks = new TileType(\"BARRACKS\", 0x000000, -100, 0.1, 0.0, 0.1, 10000);\n        TileType.wall = new TileType(\"WALL\", 0x000000, -1, 0.01, 0.0, 0.01, 1000);\n\n        TileType.destroyed.possibleUpgrades = [TileType.plains];\n        TileType.destroyedCheaply.possibleUpgrades = [TileType.plains];\n        TileType.plains.possibleUpgrades = [TileType.village, TileType.farm, TileType.barracks, TileType.wall, TileType.forest, TileType.destroyedCheaply];\n        TileType.farm.possibleUpgrades = [TileType.factoryFarm, TileType.destroyed];\n        TileType.factoryFarm.possibleUpgrades = [TileType.destroyed];\n        TileType.forest.possibleUpgrades = [TileType.plains, TileType.destroyedCheaply];\n        TileType.mountains.possibleUpgrades = [TileType.destroyedCheaply];\n        TileType.sea.possibleUpgrades = [TileType.plains, TileType.destroyedCheaply];\n        TileType.desert.possibleUpgrades = [TileType.destroyedCheaply];\n        TileType.goldMine.possibleUpgrades = [TileType.destroyed];\n        TileType.gold.possibleUpgrades = [TileType.goldMine, TileType.destroyed];\n        TileType.diamondMine.possibleUpgrades = [TileType.destroyed];\n        TileType.diamond.possibleUpgrades = [TileType.diamondMine, TileType.destroyed];\n        TileType.megalopolis.possibleUpgrades = [TileType.destroyed];\n        TileType.city.possibleUpgrades = [TileType.megalopolis, TileType.destroyed];\n        TileType.town.possibleUpgrades = [TileType.city, TileType.destroyed];\n        TileType.village.possibleUpgrades = [TileType.town, TileType.destroyed];\n        TileType.militaryBase.possibleUpgrades = [TileType.destroyed];\n        TileType.barracks.possibleUpgrades = [TileType.militaryBase, TileType.destroyed];\n        TileType.wall.possibleUpgrades = [TileType.destroyedCheaply];\n\n        TileType.allTileTypes = [\n            TileType.destroyed,\n            TileType.destroyedCheaply,\n            TileType.plains,\n            TileType.farm,\n            TileType.factoryFarm,\n            TileType.forest,\n            TileType.mountains,\n            TileType.sea,\n            TileType.desert,\n            TileType.goldMine,\n            TileType.gold,\n            TileType.diamondMine,\n            TileType.diamond,\n            TileType.megalopolis,\n            TileType.city,\n            TileType.town,\n            TileType.village,\n            TileType.militaryBase,\n            TileType.barracks,\n            TileType.wall\n        ];\n\n        for (let tileType of TileType.allTileTypes) {\n            TileType.tileTypeToGold[tileType.name] = tileType.goldPerTurn;\n        }\n\n    }\n}\nTileType.initialize();","import Vector2 = THREE.Vector2;\r\nimport nextPowerOfTwo = THREE.Math.nextPowerOfTwo;\r\nimport {TileType} from \"./TileType\";\r\n\r\nexport class PlayerStats {\r\n    tileTypeToNumberOwned: {[key: string]: number;} = {};\r\n\r\n    constructor() {\r\n    }\r\n\r\n    incrementTileType(tileType: TileType) {\r\n        let tileTypeName: string = tileType.name;\r\n        if(this.tileTypeToNumberOwned[tileTypeName] == null){\r\n            this.tileTypeToNumberOwned[tileTypeName] = 0;\r\n        }\r\n        this.tileTypeToNumberOwned[tileTypeName] ++;\r\n    }\r\n\r\n    totalGold() {\r\n        let returnValue: number = 0;\r\n        for(let tileTypeName in this.tileTypeToNumberOwned) {\r\n            let numberOwned = this.tileTypeToNumberOwned[tileTypeName];\r\n            let goldPer = TileType.tileTypeToGold[tileTypeName];\r\n            returnValue += numberOwned * goldPer;\r\n        }\r\n        return returnValue;\r\n    }\r\n\r\n    totalUnits() {\r\n        let returnValue: number = 0;\r\n        for(let tileTypeName in this.tileTypeToNumberOwned) {\r\n            returnValue += this.tileTypeToNumberOwned[tileTypeName];\r\n        }\r\n        return returnValue;\r\n    }\r\n}\r\n","import Vector2 = THREE.Vector2;\r\nimport nextPowerOfTwo = THREE.Math.nextPowerOfTwo;\r\nimport {PlayerStats} from \"./PlayerStats\";\r\n\r\nexport class Player {\r\n    color: number;\r\n    colorAsString: string;\r\n    name: string;\r\n    material: THREE.Material;\r\n    gold: number = 0;\r\n\r\n    attack: number = 0.01;\r\n    defense: number = 1.0;\r\n\r\n    kills: number = 0;\r\n    deaths: number = 0;\r\n\r\n    playerStats: PlayerStats;\r\n\r\n    constructor() {\r\n        if (Player.nextPlayerColorIndex == Player.allPlayerColors.length) {\r\n            throw new Error('Ran out of colors');\r\n        }\r\n        this.color = Player.allPlayerColors[Player.nextPlayerColorIndex];\r\n        this.colorAsString = Player.allPlayerColorsAsString[Player.nextPlayerColorIndex];\r\n        this.name = Player.allPlayersName[Player.nextPlayerColorIndex];\r\n        Player.nextPlayerColorIndex++;\r\n        this.material = new THREE.MeshBasicMaterial({color: this.color, side: THREE.BackSide});\r\n    }\r\n\r\n    resetStats() {\r\n        this.playerStats = new PlayerStats()\r\n    }\r\n\r\n    static nextPlayerColorIndex: number = 0;\r\n    static allPlayerColors = [0xFF0000, 0x0000FF, 0xFFA500, 0x00FF00, 0xD2691E];\r\n    static allPlayerColorsAsString = ['#FF0000', '#0000FF', '#FFA500', '#00FF00', '#D2691E'];\r\n    static allPlayersName = ['YOU', 'BLUE', 'ORANGE', 'GREEN', 'BROWN'];\r\n}\r\n","import {TileType} from \"./TileType\";\nimport {Player} from \"./Player\";\nimport {World} from \"./World\";\nimport Vector2 = THREE.Vector2;\n\nexport class WorldBlock {\n    tileType: TileType;\n    tileMesh: THREE.Mesh;\n    backgroundMesh: THREE.Mesh;\n    owningPlayer: Player;\n    isSelected: boolean;\n\n    constructor() {\n\n    }\n\n    setOwningPlayer(newOwningPlayer: Player) {\n        this.owningPlayer = newOwningPlayer;\n        if (newOwningPlayer) {\n            this.backgroundMesh.material = newOwningPlayer.material;\n        } else {\n            this.backgroundMesh.material = World.backgroundMaterial;\n        }\n\n    }\n\n    setTileType(newTileType: TileType) {\n        this.tileType = newTileType;\n        this.tileMesh.material = newTileType.material;\n    }\n\n    setSelected(isSelected: boolean) {\n        if (isSelected == this.isSelected) {\n            return;\n        }\n        this.isSelected = isSelected;\n        if (isSelected) {\n            this.backgroundMesh.material = World.backgroundSelectedMaterial;\n        } else {\n            this.setOwningPlayer(this.owningPlayer)\n        }\n\n    }\n}\n","import {TileType} from \"./TileType\";\nimport {WorldBlock} from \"./WorldBlock\";\nimport {Autowired} from \"./Autowired\";\nimport Vector2 = THREE.Vector2;\nimport ThrottleSettings = _.ThrottleSettings;\n\nexport class World {\n    autowired: Autowired;\n    map: {[key: number]: {[key: number]: WorldBlock;};} = {};\n    selectedWorldBlock: WorldBlock;\n    static backgroundMaterial: THREE.MeshBasicMaterial = new THREE.MeshBasicMaterial({\n        color: 0x000000,\n        side: THREE.BackSide\n    });\n    static backgroundSelectedMaterial: THREE.MeshBasicMaterial = new THREE.MeshBasicMaterial({\n        color: 0xFFFFFF,\n        side: THREE.BackSide\n    });\n\n    constructor(autowired: Autowired) {\n        this.autowired = autowired;\n\n        this.generatePlane();\n        this.generate(500, 7, 2, 0.5, 50, 0.25, 1.0, TileType.forest, [TileType.plains]);\n        this.generate(700, 3, 2, 1.0, 150, 0.25, 1.0, TileType.sea, [TileType.plains]);\n        this.generate(500, 3, 2, 0.0, 250, 0.0, 0.3, TileType.desert, [TileType.plains]);\n        this.generate(500, 4, 4, 0.0, 100, 0.0, 0.3, TileType.mountains, [TileType.forest]);\n\n        this.generate(500, 1, 1, 0.0, 40, 0.0, 0.0, TileType.gold, [TileType.plains, TileType.forest]);\n        this.generate(500, 1, 1, 0.0, 80, 0.0, 0.0, TileType.diamond, [TileType.plains, TileType.forest]);\n\n        let geometry = new THREE.PlaneGeometry(7, 7);\n        let backgroundGeometry = new THREE.PlaneGeometry(10, 10);\n\n\n        for (let i = 0; i < this.autowired.WIDTH; i++) {\n            for (let j = 0; j < this.autowired.HEIGHT; j++) {\n                let tileType = this.map[i][j].tileType;\n\n                let plane = new THREE.Mesh(geometry, tileType.material);\n                plane.rotateX(Math.PI);\n                plane.position.set(i * 10, j * 10, 0);\n                this.autowired.scene.add(plane);\n                this.map[i][j].tileMesh = plane;\n\n                let backgroundPlane = new THREE.Mesh(backgroundGeometry, World.backgroundMaterial);\n                backgroundPlane.rotateX(Math.PI);\n                backgroundPlane.position.set(i * 10, j * 10, -1);\n                this.autowired.scene.add(backgroundPlane);\n                this.map[i][j].backgroundMesh = backgroundPlane;\n            }\n        }\n\n        let $this = this;\n        $(this.autowired.canvasElement).click((event) => {\n            let vector = new THREE.Vector3 (\n                ( event.clientX / $this.autowired.canvasElement.innerWidth() ) * 2 - 1,\n                -( event.clientY / $this.autowired.canvasElement.innerHeight() ) * 2 + 1,\n                0.5);\n\n            vector.unproject($this.autowired.camera);\n            let mapPosition : THREE.Vector2 = new THREE.Vector2(Math.round(vector.x / 10), Math.round(vector.y / 10));\n            if(this.isWithinBounds(mapPosition)){\n                for (let i = 0; i < this.autowired.WIDTH; i++) {\n                    for (let j = 0; j < this.autowired.HEIGHT; j++) {\n                        this.map[i][j].setSelected(false);\n                    }\n                }\n                let selectedWorldBlock = this.getMap(mapPosition);\n                this.selectedWorldBlock = selectedWorldBlock;\n                selectedWorldBlock.setSelected(true);\n\n            }\n        })\n    }\n\n    isWithinBounds(position: Vector2) :boolean {\n        return position.x >= 0 && position.x < this.autowired.WIDTH && position.y >= 0 && position.y < this.autowired.HEIGHT;\n    };\n\n    setMap = (xUnrounded: number, yUnrounded: number, t: TileType, canApplyTo: TileType[]) => {\n        let x: number = Math.round(xUnrounded);\n        let y: number = Math.round(yUnrounded);\n        if (this.isWithinBounds(new Vector2(x, y))) {\n            let existingType: TileType = this.map[x][y].tileType;\n            let canBeApplied: boolean = _.contains(canApplyTo, existingType);\n            if (canBeApplied) {\n                this.map[x][y].tileType = t;\n            }\n        }\n    };\n    getMap (position: THREE.Vector2) {\n        return this.map[position.x][position.y]\n    }\n\n    generatePlane = () => {\n        for (let i = 0; i < this.autowired.WIDTH; i++) {\n            this.map[i] = {};\n            for (let j = 0; j < this.autowired.HEIGHT; j++) {\n                this.map[i][j] = new WorldBlock();\n                this.map[i][j].tileType = TileType.plains;\n            }\n        }\n    };\n\n    randomSpot(): THREE.Vector2 {\n        return new THREE.Vector2(Math.floor(Math.random() * this.autowired.WIDTH), Math.floor(Math.random() * this.autowired.HEIGHT));\n    };\n\n    randomSpotOnPlains(): THREE.Vector2 {\n        let position : THREE.Vector2;\n        do {\n            position = this.randomSpot()\n        } while (!this.isInMiddleOfPlains(position));\n        return position;\n    }\n\n    isInMiddleOfPlains(point: THREE.Vector2){\n        let blocksToCheck : WorldBlock[] = [this.getMap(point)];\n        blocksToCheck = blocksToCheck.concat(this.neighborBlocks(point));\n        let good : boolean = true;\n        good = good && (blocksToCheck.length == 5);\n        for(let block of blocksToCheck) {\n            good = good && (block.tileType == TileType.plains);\n        }\n        return good;\n    };\n\n    neighborOffsets: THREE.Vector2[] = [new Vector2(1, 0), new Vector2(-1, 0), new Vector2(0, 1), new Vector2(0, -1)];\n    withNeighborOffsets(point: THREE.Vector2): THREE.Vector2[] {\n        let returnValue: THREE.Vector2[] = [];\n        for (let neighborOffset of this.neighborOffsets) {\n            let neighborPoint = point.clone().add(neighborOffset);\n            if (this.autowired.world.isWithinBounds(new Vector2(neighborPoint.x, neighborPoint.y))) {\n                returnValue.push(neighborPoint)\n            }\n        }\n        return _.shuffle(returnValue) as THREE.Vector2[];\n    }\n\n    neighborBlocks(point: THREE.Vector2): WorldBlock[] {\n        let neighborPoints: Vector2[] = this.withNeighborOffsets(point);\n        let returnValue: WorldBlock[] = [];\n        for (let neighbor of neighborPoints) {\n            let neighborBlock = this.autowired.world.getMap(neighbor);\n            returnValue.push(neighborBlock);\n        }\n        return returnValue;\n    };\n\n    randomSpotAlongEdge(): THREE.Vector2 {\n        if (Math.random() < 0.5) {\n            let xEdge = Math.round(Math.random()) * this.autowired.WIDTH;\n            return new THREE.Vector2(xEdge, Math.round(Math.random() * this.autowired.HEIGHT));\n        } else {\n            let yEdge = Math.round(Math.random()) * this.autowired.HEIGHT;\n            return new THREE.Vector2(Math.round(Math.random() * this.autowired.WIDTH), yEdge);\n        }\n    };\n\n    randomDirection(scalar: number): THREE.Vector2 {\n        return new THREE.Vector2(Math.random() * 2 - 1, Math.random() * 2 - 1).multiplyScalar(scalar);\n    };\n\n    generate = (numberOfIterations: number,\n                radiusMax: number,\n                radiusMin: number,\n                directionScalar: number,\n                shuffleIterations: number,\n                edgeTendancy: number,\n                movementScalar: number,\n                t: TileType,\n                canApplyTo: TileType[]) => {\n\n        let position: THREE.Vector2 = this.randomSpotAlongEdge();\n        let radius: number;\n        let direction: THREE.Vector2 = this.randomDirection(directionScalar);\n\n        for (let zzz: number = 0; zzz < numberOfIterations; zzz++) {\n            if (zzz % shuffleIterations == 0) {\n                direction = this.randomDirection(directionScalar);\n                let diff = radiusMax - radiusMin;\n                radius = Math.random() * diff + radiusMin;\n                if (Math.random() < (1 - edgeTendancy)) {\n                    position = this.randomSpot();\n                } else {\n                    position = this.randomSpotAlongEdge();\n                }\n            }\n            position.x += (Math.random() * 5 - 2.5 + direction.x) * movementScalar;\n            position.y += (Math.random() * 5 - 2.5 + direction.y) * movementScalar;\n            if (position.y < 0 || position.y >= this.autowired.HEIGHT || position.x < 0 || position.x >= this.autowired.WIDTH) {\n                if (Math.random() < (1 - edgeTendancy)) {\n                    position = this.randomSpot();\n                } else {\n                    position = this.randomSpotAlongEdge();\n                }\n            }\n\n            for (let i: number = 0; i < radius * 2; i++) {\n                for (let j: number = 0; j < radius * 2; j++) {\n                    let iCentered = i - radius;\n                    let jCentered = j - radius;\n                    let point: Vector2 = new Vector2(iCentered + position.x, jCentered + position.y);\n                    if (new Vector2(iCentered, jCentered).length() < radius) {\n                        this.setMap(point.x, point.y, t, canApplyTo);\n                    }\n                }\n            }\n        }\n    };\n}\n","import Vector2 = THREE.Vector2;\nimport nextPowerOfTwo = THREE.Math.nextPowerOfTwo;\nimport {Autowired} from \"./Autowired\";\nimport {Player} from \"./Player\";\nimport {WorldBlock} from \"./WorldBlock\";\nimport {TileType} from \"./TileType\";\n\nexport class Simulator {\n    autowired: Autowired;\n\n    players: Player[] = [];\n    playerCharacter: Player;\n\n    constructor(autowired: Autowired) {\n        this.autowired = autowired;\n\n        for (let i: number = 0; i < 4; i++) {\n            let newPlayer: Player = new Player();\n            this.players.push(newPlayer);\n\n            let startingPosition: THREE.Vector2 = this.autowired.world.randomSpotOnPlains();\n            let startingWorldBlock: WorldBlock = this.autowired.world.map[startingPosition.x][startingPosition.y];\n            startingWorldBlock.setOwningPlayer(newPlayer);\n            startingWorldBlock.setTileType(TileType.village)\n        }\n        this.playerCharacter = this.players[0];\n\n    }\n\n    openNeighborBlocks(point: THREE.Vector2): WorldBlock[] {\n        let neighborBlocks: WorldBlock[] = this.autowired.world.neighborBlocks(point);\n        let returnValue: WorldBlock[] = [];\n        for (let neighborBlock of neighborBlocks) {\n            let neighborTileIsEmpty = !neighborBlock.owningPlayer;\n            if (neighborTileIsEmpty) {\n                returnValue.push(neighborBlock);\n            }\n        }\n        return returnValue;\n    }\n\n    enemyNeighborBlocks(point: THREE.Vector2): WorldBlock[] {\n        let neighborBlocks: WorldBlock[] = this.autowired.world.neighborBlocks(point);\n        let block: WorldBlock = this.autowired.world.getMap(point);\n        let returnValue: WorldBlock[] = [];\n        for (let neighborBlock of neighborBlocks) {\n            let isEnemyTile: boolean = neighborBlock.owningPlayer != null && neighborBlock.owningPlayer != block.owningPlayer;\n            if (isEnemyTile) {\n                returnValue.push(neighborBlock);\n            }\n        }\n        return returnValue;\n    }\n\n    update(): void {\n        for (let i: number = 0; i < this.autowired.WIDTH; i++) {\n            for (let j: number = 0; j < this.autowired.HEIGHT; j++) {\n                let point: THREE.Vector2 = new THREE.Vector2(i, j);\n                let worldBlock: WorldBlock = this.autowired.world.map[i][j];\n                let tileType: TileType = worldBlock.tileType;\n                if (worldBlock.owningPlayer) {\n                    for (let neighborBlock of this.openNeighborBlocks(point)) {\n                        let shouldSpawn = tileType.chanceToSpawn > Math.random();\n                        if (shouldSpawn) {\n                            neighborBlock.setOwningPlayer(worldBlock.owningPlayer);\n                        }\n                    }\n                    let enemyNeighbors: WorldBlock[] = this.enemyNeighborBlocks(point);\n                    for (let neighborBlock of enemyNeighbors) {\n                        let shouldKill = worldBlock.owningPlayer.attack / neighborBlock.owningPlayer.defense > Math.random();\n                        if (shouldKill) {\n                            neighborBlock.owningPlayer.deaths++;\n                            worldBlock.owningPlayer.kills++;\n                            neighborBlock.setOwningPlayer(null);\n\n                        }\n                    }\n                    let openNeighbors: WorldBlock[] = this.openNeighborBlocks(point);\n                    if (openNeighbors.length > 0) {\n                        let possibleNewPosition = openNeighbors[0];\n                        let probabilityToMove = possibleNewPosition.tileType.tendencyToEnter * tileType.tendencyToLeave;\n                        if (probabilityToMove > Math.random()) {\n                            possibleNewPosition.setOwningPlayer(worldBlock.owningPlayer);\n                            worldBlock.setOwningPlayer(null);\n                        }\n                    }\n\n                }\n            }\n        }\n        for (let player of this.players) {\n            player.resetStats()\n        }\n        for (let i: number = 0; i < this.autowired.WIDTH; i++) {\n            for (let j: number = 0; j < this.autowired.HEIGHT; j++) {\n                let point: THREE.Vector2 = new THREE.Vector2(i, j);\n                let worldBlock: WorldBlock = this.autowired.world.map[i][j];\n                let tileType: TileType = worldBlock.tileType;\n                if (worldBlock.owningPlayer) {\n                    let player: Player = worldBlock.owningPlayer;\n                    player.playerStats.incrementTileType(tileType);\n                }\n            }\n        }\n        for (let player of this.players) {\n            player.gold += player.playerStats.totalGold();\n        }\n    }\n}\n","import {Autowired} from \"./Autowired\";\r\nimport {TileType} from \"./TileType\";\r\n//http://stackoverflow.com/questions/15248872/dynamically-create-2d-text-in-three-js\r\nexport class UI {\r\n    autowired: Autowired;\r\n    scoreDiv: HTMLDivElement;\r\n    worldBlockDIV: HTMLDivElement;\r\n    upgradesDIV: HTMLDivElement;\r\n\r\n    constructor(autowired: Autowired) {\r\n        this.autowired = autowired;\r\n        let element = document.body;\r\n\r\n        this.scoreDiv = document.createElement('div');\r\n        this.scoreDiv.style.position = 'absolute';\r\n        this.scoreDiv.style.color = this.autowired.simulator.playerCharacter.colorAsString;\r\n        this.scoreDiv.innerHTML = \"\";\r\n        this.scoreDiv.style.top = '25px';\r\n        this.scoreDiv.style.left = '25px';\r\n        this.scoreDiv.style.fontSize = \"25px\";\r\n        element.appendChild(this.scoreDiv);\r\n\r\n        this.worldBlockDIV = document.createElement('div');\r\n        this.worldBlockDIV.style.position = 'absolute';\r\n        this.worldBlockDIV.style.color = this.autowired.simulator.playerCharacter.colorAsString;\r\n        this.worldBlockDIV.innerHTML = \"\";\r\n        this.worldBlockDIV.style.top = '50%';\r\n        this.worldBlockDIV.style.left = '25px';\r\n        this.worldBlockDIV.style.fontSize = \"25px\";\r\n        element.appendChild(this.worldBlockDIV);\r\n    }\r\n\r\n    nf = new Intl.NumberFormat();\r\n\r\n    public update() {\r\n        let self = this;\r\n        let gold: string = \"TOTAL GOLD: \" + this.nf.format(this.autowired.simulator.playerCharacter.gold);\r\n        let goldPerTurn: String = \"RATE OF GOLD: \" + this.nf.format(this.autowired.simulator.playerCharacter.playerStats.totalGold());\r\n        let units: string = \"UNITS ALIVE: \" + this.nf.format(this.autowired.simulator.playerCharacter.playerStats.totalUnits());\r\n        let kills: string = \"TOTAL KILLS: \" + this.nf.format(this.autowired.simulator.playerCharacter.kills);\r\n        let deaths: string = \"TOTAL DEATHS: \" + this.nf.format(this.autowired.simulator.playerCharacter.deaths);\r\n        this.scoreDiv.innerText = [gold, goldPerTurn, units, kills, deaths].join('\\n');\r\n\r\n        let selected = this.autowired.world.selectedWorldBlock;\r\n        if (selected) {\r\n            let selectedOwner = selected.owningPlayer;\r\n            let tileTypeString: string = \"TYPE: \" + selected.tileType.name;\r\n            let player: string = \"OWNER: \" + ((!!selectedOwner) ? selectedOwner.name : \"NONE\");\r\n            let rateOfGold: string = \"GOLD GENERATED: \" + this.nf.format(selected.tileType.goldPerTurn);\r\n            let rateOfUnits: string = \"UNITS GENERATED: \" + this.nf.format(selected.tileType.chanceToSpawn);\r\n            let possibleUpgrades: String = \"POSSIBLE UPGRADES: \";\r\n            this.worldBlockDIV.innerText = [tileTypeString, player, rateOfGold, possibleUpgrades, rateOfUnits].join('\\n');\r\n\r\n            let tileType = selected.tileType;\r\n            this.upgradesDIV = document.createElement('div');\r\n\r\n            let user = self.autowired.simulator.playerCharacter;\r\n            _(tileType.possibleUpgrades).each(function (possibleUpgrade: TileType) {\r\n                let button: HTMLButtonElement = document.createElement('button');\r\n                button.classList.add('upgrade-button');\r\n                button.disabled = user.gold < possibleUpgrade.upgradeCost;\r\n                button.innerText = possibleUpgrade.name + ' for ' + self.nf.format(possibleUpgrade.upgradeCost) + ' gold';\r\n                self.upgradesDIV.appendChild(button);\r\n                self.upgradesDIV.appendChild(document.createElement('br'));\r\n                $(button).click(function (event) {\r\n                    alert();\r\n                    if (user.gold >= possibleUpgrade.upgradeCost) {\r\n                        selected.setTileType(possibleUpgrade);\r\n                        console.log(user.gold);\r\n                        user.gold -= possibleUpgrade.upgradeCost;\r\n                        console.log(user.gold)\r\n                    }\r\n                });\r\n            });\r\n            this.worldBlockDIV.appendChild(this.upgradesDIV);\r\n\r\n\r\n        } else {\r\n            this.worldBlockDIV.innerText = \"\";\r\n        }\r\n    }\r\n}","import ShadowMapType = THREE.ShadowMapType;\nimport PCFSoftShadowMap = THREE.PCFSoftShadowMap;\nimport Side = THREE.Side;\nimport Vector2 = THREE.Vector2;\nimport {Autowired} from \"./Autowired\";\nimport Vector3 = THREE.Vector3;\n\nexport class UserControls {\n    autowired: Autowired;\n\n    mousePosition: THREE.Vector2 = new Vector2(0.5, 0.5);\n\n    constructor(autowired: Autowired) {\n        this.autowired = autowired;\n        let self = this;\n\n        $(document).keydown((e) => {\n            self.onKeyPress(e, true)\n        });\n        $(document).keyup((e) => {\n            self.onKeyPress(e, false)\n        });\n\n        let canvas = this.autowired.canvasElement;\n        $(canvas).mousemove((event) => {\n            let mousePosition = new Vector2(event.clientX, event.clientY);\n            let screenSize = new Vector2(canvas.innerWidth(), canvas.innerHeight());\n            this.mousePosition = mousePosition.divide(screenSize);\n        })\n    };\n\n    isKeyPressed: {[key: number]: boolean;} = {};\n\n    update() {\n        let left: Vector3 = new Vector3(-1, 0, 0);\n        let right: Vector3 = new Vector3(1, 0, 0);\n        let up: Vector3 = new Vector3(0, 1, 0);\n        let down: Vector3 = new Vector3(0, -1, 0);\n        let keyToDirection: {[key: number]: Vector3;} = {\n            37: left, //left arrow\n            65: left, //a\n            39: right,  //right arrow\n            68: right,  //d\n            38: up,  //up arrow\n            87: up,  //w\n            40: down,  //down arrow\n            83: down,  //s\n        };\n        let translationScalar = 10;\n        for (let key in keyToDirection) {\n            if (this.isKeyPressed[key]) {\n                let direction = keyToDirection[key];\n                this.autowired.camera.translateOnAxis(direction, translationScalar);\n            }\n        }\n        let margin = 0.05;\n        if(this.mousePosition.x < margin){\n            this.autowired.camera.translateOnAxis(left, translationScalar);\n        }\n        if(this.mousePosition.x > (1.0 - margin)) {\n            this.autowired.camera.translateOnAxis(right, translationScalar);\n        }\n        if(this.mousePosition.y < margin){\n            this.autowired.camera.translateOnAxis(up, translationScalar);\n        }\n        if(this.mousePosition.y > (1.0 - margin)) {\n            this.autowired.camera.translateOnAxis(down, translationScalar);\n        }\n\n        let keyToScreenScalar: {[key: number]: number;} = {\n            16: 0.97, //shift -> out\n            32: 1.03, //space -> in\n        };\n        for (let key in keyToScreenScalar) {\n            if (this.isKeyPressed[key]) {\n                //this.autowired.camera.zoom *= keyToScreenScalar[key];\n                //this.autowired.camera.updateProjectionMatrix();\n            }\n        }\n    };\n\n    onKeyPress(event, isKeyDown: boolean) {\n        this.isKeyPressed[event.keyCode] = isKeyDown;\n    };\n}","import {World} from \"./World\";\nimport {Simulator} from \"./Simulator\";\nimport {UI} from \"./UI\";\nimport {UserControls} from \"./UserControls\";\n\nimport ShadowMapType = THREE.ShadowMapType;\nimport PCFSoftShadowMap = THREE.PCFSoftShadowMap;\nimport Side = THREE.Side;\nimport Vector2 = THREE.Vector2;\nimport Vector3 = THREE.Vector3;\n\nexport class Autowired {\n    isGameOver: boolean;\n\n    camera: THREE.OrthographicCamera;\n    scene: THREE.Scene;\n    renderer: THREE.WebGLRenderer;\n\n    canvasElement: JQuery;\n\n    world: World;\n    simulator: Simulator;\n    userControls: UserControls;\n    ui: UI;\n    WIDTH: number = 100;\n    HEIGHT: number = 60;\n\n    resetCameraAndRenderer() {\n        let width = $(window).innerWidth() - 40;\n        let height = $(window).innerHeight() - 40;\n        let aspectRatio = width / height;\n        this.renderer.setSize(width, height);\n\n        let size: number = 650;\n        this.camera = new THREE.OrthographicCamera(-size, size, size / aspectRatio, -size / aspectRatio, 0, 10);\n        this.camera.position.set(0, 0, 1);\n        this.camera.lookAt(new THREE.Vector3(0, 0, 0));\n        this.camera.position.set(355, 300, 5);\n        this.camera.updateProjectionMatrix();\n\n        let geometry = new THREE.PlaneGeometry(size * 0.8, size / aspectRatio * 200);\n        let material: THREE.MeshStandardMaterial = new THREE.MeshStandardMaterial(\n            {\n                color: \"blue\",\n                side: THREE.BackSide\n            });\n\n        let sidePanelPlane: THREE.Mesh = new THREE.Mesh(geometry, material);\n\n        sidePanelPlane.rotateX(Math.PI);\n\n        this.camera.add(sidePanelPlane);\n        sidePanelPlane.position.set(-650, 0, -2);\n\n        this.scene.add(this.camera);\n    }\n\n    constructor() {\n        this.isGameOver = false;\n        this.canvasElement = $(\"#myCanvas\");\n\n        this.renderer = new THREE.WebGLRenderer({\n            canvas: <HTMLCanvasElement>this.canvasElement.get(0),\n            antialias: true,\n            precision: \"highp\",\n        });\n\n        this.scene = new THREE.Scene();\n        this.resetCameraAndRenderer();\n\n        this.scene.add(new THREE.AmbientLight(0x404040));\n\n        this.world = new World(this);\n        this.simulator = new Simulator(this);\n        this.ui = new UI(this);\n        this.userControls = new UserControls(this);\n\n        window.addEventListener('resize', (event) => {\n            this.resetCameraAndRenderer();\n        });\n    }\n}","/// <reference path=\"definitions/underscore.d.ts\" />\nimport {Autowired} from \"./Autowired\";\n\n\nclass Main {\n    autowired: Autowired;\n\n    constructor() {\n        this.autowired = new Autowired();\n        setInterval(() => {\n            this.autowired.ui.update()\n        }, 400);\n    }\n\n    render = () => {\n        this.autowired.userControls.update();\n        this.autowired.simulator.update();\n\n        this.autowired.renderer.render(this.autowired.scene, this.autowired.camera);\n        requestAnimationFrame(this.render);\n    };\n}\nlet main: Main = new Main();\nmain.render();"]}