{"version":3,"file":"bundle.js","sourceRoot":"","sources":["../TileType.ts","../Player.ts","../WorldBlock.ts","../World.ts","../Simulator.ts","../Autowired.ts","../Main.ts"],"names":[],"mappings":"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","sourcesContent":["export class TileType {\n    name: string;\n    color: number;\n    goldPerTurn: number;\n    tendencyToEnter: number;\n    tendencyToLeave: number;\n    chanceToSpawn: number;\n\n    material: THREE.Material;\n\n    public constructor(\n        name: string,\n        color: number,\n        goldPerTurn: number,\n        tendencyToEnter: number,\n        tendencyToLeave: number,\n        chanceToSpawn: number\n    ) {\n        this.name = name;\n        this.color = color;\n        this.goldPerTurn = goldPerTurn;\n        this.tendencyToEnter = tendencyToEnter;\n        this.tendencyToLeave = tendencyToLeave;\n        this.chanceToSpawn = chanceToSpawn;\n\n        this.material = new THREE.MeshBasicMaterial({color: this.color, side: THREE.BackSide});\n    }\n\n    static plains: TileType = new TileType(\"plains\", 0xC0FF6D, 1, 0.5, 0.2, 0);\n    static woods: TileType = new TileType(\"woods\", 0x228B22, 2, 0.25, 0.21, 0);\n    static mountains: TileType = new TileType(\"mountains\", 0x968D99, 3, 0.1, 0.1, 0);\n    static sea: TileType = new TileType(\"sea\", 0x006994, 1, 0.01, 0.01, 0);\n    static desert: TileType = new TileType(\"desert\", 0xEDC9AF, 0, 0.01, 0.01, 0);\n\n    static gold: TileType = new TileType(\"gold\", 0xFFDF00, 10, 0.01, 0.0, 0);\n    static diamond: TileType = new TileType(\"diamond\", 0x9AC5DB, 20, 0.01, 0.0, 0);\n\n    static townHall1: TileType = new TileType(\"townHall1\", 0x000000, 10, 0.01, 0.0, 0.01);\n}","import Vector2 = THREE.Vector2;\nimport nextPowerOfTwo = THREE.Math.nextPowerOfTwo;\n\nexport class Player {\n    color: number;\n    material: THREE.Material;\n    gold: number = 0;\n\n    attack: number = 0.01;\n    defense: number = 1.0;\n\n    constructor() {\n        if (Player.nextPlayerColorIndex == Player.allPlayerColors.length) {\n            throw new Error('Ran out of colors');\n        }\n        this.color = Player.allPlayerColors[Player.nextPlayerColorIndex++];\n        this.material = new THREE.MeshBasicMaterial({color: this.color, side: THREE.BackSide});\n    }\n\n    static nextPlayerColorIndex: number = 0;\n    static allPlayerColors = [0xFF0000, 0x0000FF, 0xFFA500, 0x00FF00, 0xD2691E]\n}\n","import {TileType} from \"./TileType\";\nimport {Player} from \"./Player\";\nimport {World} from \"./World\";\nimport Vector2 = THREE.Vector2;\n\nexport class WorldBlock {\n    tileType: TileType;\n    tileMesh: THREE.Mesh;\n    backgroundMesh: THREE.Mesh;\n    owningPlayer: Player;\n\n    constructor() {\n\n    }\n\n    setOwningPlayer(newOwningPlayer: Player) {\n        this.owningPlayer = newOwningPlayer;\n        if (newOwningPlayer) {\n            this.backgroundMesh.material = newOwningPlayer.material;\n        } else {\n            this.backgroundMesh.material = World.backgroundMaterial;\n        }\n\n    }\n\n    setTileType(newTileType: TileType) {\n        this.tileType = newTileType;\n        this.tileMesh.material = newTileType.material;\n    }\n}\n","import {TileType} from \"./TileType\";\nimport {WorldBlock} from \"./WorldBlock\";\nimport {Autowired} from \"./Autowired\";\nimport Vector2 = THREE.Vector2;\nimport {Player} from \"./Player\";\n\nexport class World {\n    autowired: Autowired;\n    map: {[key: number]: {[key: number]: WorldBlock;};} = {};\n    static backgroundMaterial: THREE.MeshBasicMaterial = new THREE.MeshBasicMaterial({color: 0x000000, side: THREE.BackSide});\n\n    constructor(autowired: Autowired) {\n        this.autowired = autowired;\n\n        this.generatePlane();\n        this.generate(500, 7, 2, 0.5, 50, 0.25, 1.0, TileType.woods, [TileType.plains]);\n        this.generate(700, 3, 2, 1.0, 150, 0.25, 1.0, TileType.sea, [TileType.plains]);\n        this.generate(500, 3, 2, 0.0, 250, 0.0, 0.3, TileType.desert, [TileType.plains]);\n        this.generate(500, 4, 4, 0.0, 100, 0.0, 0.3, TileType.mountains, [TileType.woods]);\n\n        this.generate(500, 1, 1, 0.0, 40, 0.0, 0.0, TileType.gold, [TileType.plains, TileType.woods]);\n        this.generate(500, 1, 1, 0.0, 80, 0.0, 0.0, TileType.diamond, [TileType.plains, TileType.woods]);\n\n        let geometry = new THREE.PlaneGeometry(8, 8);\n        let backgroundGeometry = new THREE.PlaneGeometry(10, 10);\n\n\n        for (let i = 0; i < this.autowired.WIDTH; i++) {\n            for (let j = 0; j < this.autowired.HEIGHT; j++) {\n                let tileType = this.map[i][j].tileType;\n\n                let plane = new THREE.Mesh(geometry, tileType.material);\n                plane.rotateX(Math.PI);\n                plane.position.set(i * 10, j * 10, 0);\n                this.autowired.scene.add(plane);\n                this.map[i][j].tileMesh = plane;\n\n                let backgroundPlane = new THREE.Mesh(backgroundGeometry, World.backgroundMaterial);\n                backgroundPlane.rotateX(Math.PI);\n                backgroundPlane.position.set(i * 10, j * 10, -1);\n                this.autowired.scene.add(backgroundPlane);\n                this.map[i][j].backgroundMesh = backgroundPlane;\n            }\n        }\n    }\n    isWithinBounds(x: number, y: number) : boolean {\n        return x >= 0 && x < this.autowired.WIDTH && y >= 0 && y < this.autowired.HEIGHT;\n    }\n\n    setMap = (xUnrounded: number, yUnrounded: number, t: TileType, canApplyTo: TileType[]) => {\n        let x: number = Math.round(xUnrounded);\n        let y: number = Math.round(yUnrounded);\n        if (this.isWithinBounds(x, y)) {\n            let existingType: TileType = this.map[x][y].tileType;\n            let canBeApplied: boolean = _.contains(canApplyTo, existingType);\n            if (canBeApplied) {\n                this.map[x][y].tileType = t;\n            }\n        }\n    };\n\n    setMapOwner = (xUnrounded: number, yUnrounded: number, player: Player) => {\n        let x: number = Math.round(xUnrounded);\n        let y: number = Math.round(yUnrounded);\n        if (this.isWithinBounds(x, y)) {\n            let worldBlock: WorldBlock = this.map[x][y];\n\n        }\n    };\n\n    generatePlane = () => {\n        for (let i = 0; i < this.autowired.WIDTH; i++) {\n            this.map[i] = {};\n            for (let j = 0; j < this.autowired.HEIGHT; j++) {\n                this.map[i][j] = new WorldBlock();\n                this.map[i][j].tileType = TileType.plains;\n            }\n        }\n    };\n\n    randomSpot(): THREE.Vector2 {\n        return new THREE.Vector2(Math.round(Math.random() * this.autowired.WIDTH), Math.round(Math.random() * this.autowired.HEIGHT));\n    };\n\n    randomSpotAlongEdge(): THREE.Vector2 {\n        if (Math.random() < 0.5) {\n            let xEdge = Math.round(Math.random()) * this.autowired.WIDTH;\n            return new THREE.Vector2(xEdge, Math.round(Math.random() * this.autowired.HEIGHT));\n        } else {\n            let yEdge = Math.round(Math.random()) * this.autowired.HEIGHT;\n            return new THREE.Vector2(Math.round(Math.random() * this.autowired.WIDTH), yEdge);\n        }\n    };\n\n    randomDirection(scalar: number): THREE.Vector2 {\n        return new THREE.Vector2(Math.random() * 2 - 1, Math.random() * 2 - 1).multiplyScalar(scalar);\n    };\n\n    generate = (numberOfIterations: number,\n                radiusMax: number,\n                radiusMin: number,\n                directionScalar: number,\n                shuffleIterations: number,\n                edgeTendancy: number,\n                movementScalar: number,\n                t: TileType,\n                canApplyTo: TileType[]) => {\n\n        let position: THREE.Vector2 = this.randomSpotAlongEdge();\n        let radius: number;\n        let direction: THREE.Vector2 = this.randomDirection(directionScalar);\n\n        for (let zzz: number = 0; zzz < numberOfIterations; zzz++) {\n            if (zzz % shuffleIterations == 0) {\n                direction = this.randomDirection(directionScalar);\n                let diff = radiusMax - radiusMin;\n                radius = Math.random() * diff + radiusMin;\n                if (Math.random() < (1 - edgeTendancy)) {\n                    position = this.randomSpot();\n                } else {\n                    position = this.randomSpotAlongEdge();\n                }\n            }\n            position.x += (Math.random() * 5 - 2.5 + direction.x) * movementScalar;\n            position.y += (Math.random() * 5 - 2.5 + direction.y) * movementScalar;\n            if (position.y < 0 || position.y >= this.autowired.HEIGHT || position.x < 0 || position.x >= this.autowired.WIDTH) {\n                if (Math.random() < (1 - edgeTendancy)) {\n                    position = this.randomSpot();\n                } else {\n                    position = this.randomSpotAlongEdge();\n                }\n            }\n\n            for (let i: number = 0; i < radius * 2; i++) {\n                for (let j: number = 0; j < radius * 2; j++) {\n                    let iCentered = i - radius;\n                    let jCentered = j - radius;\n                    let point: Vector2 = new Vector2(iCentered + position.x, jCentered + position.y);\n                    if (new Vector2(iCentered, jCentered).length() < radius) {\n                        this.setMap(point.x, point.y, t, canApplyTo);\n                    }\n                }\n            }\n        }\n    };\n}\n","import Vector2 = THREE.Vector2;\nimport nextPowerOfTwo = THREE.Math.nextPowerOfTwo;\nimport {Autowired} from \"./Autowired\";\nimport {Player} from \"./Player\";\nimport {WorldBlock} from \"./WorldBlock\";\nimport {TileType} from \"./TileType\";\n\nexport class Simulator {\n    autowired: Autowired;\n\n    players: Player[] = [];\n    playerCharacter: Player;\n\n    constructor(autowired: Autowired) {\n        this.autowired = autowired;\n\n        for (let i: number = 0; i < 4; i++) {\n            let newPlayer: Player = new Player();\n            this.players.push(newPlayer);\n\n            let startingPosition: THREE.Vector2 = this.autowired.world.randomSpot();\n            let startingWorldBlock: WorldBlock = this.autowired.world.map[startingPosition.x][startingPosition.y];\n            startingWorldBlock.setOwningPlayer(newPlayer);\n            startingWorldBlock.setTileType(TileType.townHall1)\n        }\n        this.playerCharacter = this.players[0];\n\n    }\n\n    neighborOffsets: THREE.Vector2[] = [new Vector2(1, 0), new Vector2(-1, 0), new Vector2(0, 1), new Vector2(0, -1)];\n\n    withNeighborOffsets(point: THREE.Vector2): THREE.Vector2[] {\n        let returnValue: THREE.Vector2[] = [];\n        for (let neighborOffset of this.neighborOffsets) {\n            let neighborPoint = point.clone().add(neighborOffset);\n            if (this.autowired.world.isWithinBounds(neighborPoint.x, neighborPoint.y)) {\n                returnValue.push(neighborPoint)\n            }\n        }\n        return _.shuffle(returnValue) as THREE.Vector2[];\n    }\n\n    openNeighborBlocks(point: THREE.Vector2): WorldBlock[] {\n        let neighborPoints: Vector2[] = this.withNeighborOffsets(point);\n        let returnValue: WorldBlock[] = [];\n        for (let neighbor of neighborPoints) {\n            let neighborBlock = this.autowired.world.map[neighbor.x][neighbor.y];\n            let neighborTileIsEmpty = !neighborBlock.owningPlayer;\n            if (neighborTileIsEmpty) {\n                returnValue.push(neighborBlock);\n            }\n        }\n        return returnValue;\n    }\n\n    enemyNeighborBlocks(point: THREE.Vector2): WorldBlock[] {\n        let neighborPoints: Vector2[] = this.withNeighborOffsets(point);\n        let block: WorldBlock = this.autowired.world.map[point.x][point.y];\n        let returnValue: WorldBlock[] = [];\n        for (let neighbor of neighborPoints) {\n            let neighborBlock: WorldBlock = this.autowired.world.map[neighbor.x][neighbor.y];\n            let isEnemyTile: boolean = neighborBlock.owningPlayer != null && neighborBlock.owningPlayer != block.owningPlayer\n            if (isEnemyTile) {\n                returnValue.push(neighborBlock);\n            }\n        }\n        return returnValue;\n    }\n\n    update(): void {\n        for (let i: number = 0; i < this.autowired.WIDTH; i++) {\n            for (let j: number = 0; j < this.autowired.HEIGHT; j++) {\n                let point: THREE.Vector2 = new THREE.Vector2(i, j);\n                let worldBlock: WorldBlock = this.autowired.world.map[i][j];\n                let tileType: TileType = worldBlock.tileType;\n                if (worldBlock.owningPlayer) {\n                    for (let neighborBlock of this.openNeighborBlocks(point)) {\n                        let shouldSpawn = tileType.chanceToSpawn > Math.random();\n                        if (shouldSpawn) {\n                            neighborBlock.setOwningPlayer(worldBlock.owningPlayer);\n                        }\n                    }\n                    let enemyNeighbors: WorldBlock[] = this.enemyNeighborBlocks(point);\n                    for (let neighborBlock of enemyNeighbors) {\n                        let shouldKill = worldBlock.owningPlayer.attack / neighborBlock.owningPlayer.defense > Math.random();\n                        if (shouldKill) {\n                            neighborBlock.setOwningPlayer(null);\n                        }\n                    }\n                    let openNeighbors: WorldBlock[] = this.openNeighborBlocks(point);\n                    if (openNeighbors.length > 0) {\n                        let possibleNewPosition = openNeighbors[0];\n                        let probabilityToMove = tileType.tendencyToLeave / possibleNewPosition.tileType.tendencyToEnter;\n                        if (probabilityToMove > Math.random()) {\n                            possibleNewPosition.setOwningPlayer(worldBlock.owningPlayer);\n                            worldBlock.setOwningPlayer(null);\n                        }\n                    }\n\n                }\n            }\n        }\n        for (let i: number = 0; i < this.autowired.WIDTH; i++) {\n            for (let j: number = 0; j < this.autowired.HEIGHT; j++) {\n            }\n        }\n    }\n}\n","import {World} from \"./World\";\nimport {Simulator} from \"./Simulator\";\n\nimport ShadowMapType = THREE.ShadowMapType;\nimport PCFSoftShadowMap = THREE.PCFSoftShadowMap;\n\nexport class Autowired {\n    isGameOver: boolean;\n\n    camera: THREE.Camera;\n    scene: THREE.Scene;\n    renderer: THREE.WebGLRenderer;\n    glowScene: THREE.Scene;\n\n    canvasElement: JQuery;\n\n    world : World;\n    simulator: Simulator;\n    WIDTH: number = 100;\n    HEIGHT: number = 100;\n\n    constructor() {\n        this.isGameOver = false;\n        this.canvasElement = $(\"#myCanvas\");\n\n        let VIEW_ANGLE = 75;\n        let NEAR = 0.1;\n        let FAR = 1000;\n\n        this.renderer = new THREE.WebGLRenderer({\n            canvas: <HTMLCanvasElement>this.canvasElement.get(0),\n            antialias: true,\n            precision: \"highp\"\n        });\n        this.renderer.autoClear = false;\n        this.renderer.shadowMap.enabled = true;\n        this.renderer.shadowMap.type = PCFSoftShadowMap;\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\n\n        this.camera = new THREE.PerspectiveCamera(\n            VIEW_ANGLE,\n            window.innerWidth / window.innerHeight,\n            NEAR,\n            FAR);\n        this.camera.position.set(0, 0, 500);\n        this.camera.lookAt(new THREE.Vector3(0,0,0));\n        this.camera.position.set(500, 500, 700);\n\n        this.scene = new THREE.Scene();\n\n        let light = new THREE.PointLight(0xFFFFFF, 0.5, 10000);\n        light.position.set(0, 0, 0);\n        this.scene.add(light);\n\n        this.scene.add(new THREE.AmbientLight(0x404040));\n\n        this.world = new World(this);\n        this.simulator = new Simulator(this);\n    }\n}","/// <reference path=\"Cube.ts\" />\n/// <reference path=\"Room.ts\" />\n/// <reference path=\"definitions/underscore.d.ts\" />\n\nimport {Autowired} from \"./Autowired\";\n\n\nclass Main {\n    autowired: Autowired;\n\n    constructor() {\n        this.autowired = new Autowired();\n    }\n\n\n\n    render = () => {\n        requestAnimationFrame(this.render);\n        this.autowired.simulator.update();\n        this.autowired.renderer.clear();\n        this.autowired.renderer.render(this.autowired.scene, this.autowired.camera);\n    };\n}\nlet main: Main = new Main();\nmain.render();"]}